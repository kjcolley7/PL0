#kMac:~/Projects/Xcode/PL0/PL0 (master)$ cat input.txt
procedure BoxVolume(l, w, h);
	begin
		/*{ Ensure we can return a value from a procedure }*/
		return := l * w * h;
	end;

procedure WriteVolume(l, w, h);
	begin
		/*{ Ensure we can use "return" like a normal variable }*/
		return := call BoxVolume(l, w, h);
		write return;
	end;

procedure Main();
	const L = 7, W = 11, H = 13;
	var volume;
	begin
		/*{ Ensure we can call a procedure with parameters as a statement }*/
		call WriteVolume(2, 4, 7);
		
		/*{ Ensure we can use the return value of a procedure call with parameters }*/
		volume := call BoxVolume(L, W, H);
		write volume;
		
		/*{ Ensure we can use the return value of a procedure call in a condition }*/
		if 2 * call BoxVolume(L, W, H) > 2000 then begin
			/*{ Ensure we can use expressions as parameter values }*/
			call WriteVolume(2 * L, W, H);
		end
		else begin
			call WriteVolume(2000, 1, 1);
		end;
		
		/*{ Ensure we can use the result of a procedure call within a parameter for another procedure call }*/
		call WriteVolume(2, 3, 3 * call BoxVolume(3, 5, 4) - 173);
	end;

/*{ Ensure we can still call a procedure without parameters without parentheses as a statement }*/
call Main.
#kMac:~/Projects/Xcode/PL0/PL0 (master)$ ./pl0 -m -v
5 0 2
9 0 3
6 0 5
6 0 4
1 0 2
1 0 4
1 0 7
6 0 -7
5 1 63
6 0 4
1 0 7
1 0 11
1 0 13
6 0 -7
5 1 75
6 0 1
4 0 4
3 0 4
9 0 1
1 0 2
6 0 4
1 0 7
1 0 11
1 0 13
6 0 -7
5 1 75
6 0 1
2 0 4
1 0 2000
2 0 12
8 0 40
6 0 4
1 0 2
1 0 7
2 0 4
1 0 11
1 0 13
6 0 -7
5 1 63
7 0 46
6 0 4
1 0 2000
1 0 1
1 0 1
6 0 -7
5 1 63
6 0 4
1 0 2
1 0 3
1 0 3
6 0 4
1 0 3
1 0 5
1 0 4
6 0 -7
5 1 75
6 0 1
2 0 4
1 0 173
2 0 3
6 0 -7
5 1 63
2 0 0
6 0 7
6 0 4
3 0 4
3 0 5
3 0 6
6 0 -7
5 1 75
6 0 1
4 0 0
3 0 0
9 0 1
2 0 0
6 0 7
3 0 4
3 0 5
3 0 6
2 0 4
2 0 4
4 0 0
2 0 0
                                  pc      bp      sp  stack
Initial values                     0       1       0
   0     CAL       0       2       2       1       0  
   2     INC       0       5       3       1       5  | 0 1 1 1 0
   3     INC       0       4       4       1       9  | 0 1 1 1 0 0 0 0 0
   4     LIT       0       2       5       1      10  | 0 1 1 1 0 0 0 0 0 2
   5     LIT       0       4       6       1      11  | 0 1 1 1 0 0 0 0 0 2 4
   6     LIT       0       7       7       1      12  | 0 1 1 1 0 0 0 0 0 2 4 7
   7     INC       0      -7       8       1       5  | 0 1 1 1 0
   8     CAL       1      63      63       6       5  | 0 1 1 1 0
  63     INC       0       7      64       6      12  | 0 1 1 1 0 | 0 1 1 9 2 4 7
  64     INC       0       4      65       6      16  | 0 1 1 1 0 | 0 1 1 9 2 4 7 0 0 0 0
  65     LOD       0       4      66       6      17  | 0 1 1 1 0 | 0 1 1 9 2 4 7 0 0 0 0 2
  66     LOD       0       5      67       6      18  | 0 1 1 1 0 | 0 1 1 9 2 4 7 0 0 0 0 2 4
  67     LOD       0       6      68       6      19  | 0 1 1 1 0 | 0 1 1 9 2 4 7 0 0 0 0 2 4 7
  68     INC       0      -7      69       6      12  | 0 1 1 1 0 | 0 1 1 9 2 4 7
  69     CAL       1      75      75      13      12  | 0 1 1 1 0 | 0 1 1 9 2 4 7
  75     INC       0       7      76      13      19  | 0 1 1 1 0 | 0 1 1 9 2 4 7 | 0 1 6 70 2 4 7
  76     LOD       0       4      77      13      20  | 0 1 1 1 0 | 0 1 1 9 2 4 7 | 0 1 6 70 2 4 7 2
  77     LOD       0       5      78      13      21  | 0 1 1 1 0 | 0 1 1 9 2 4 7 | 0 1 6 70 2 4 7 2 4
  78     LOD       0       6      79      13      22  | 0 1 1 1 0 | 0 1 1 9 2 4 7 | 0 1 6 70 2 4 7 2 4 7
  79     OPR       0       4      80      13      21  | 0 1 1 1 0 | 0 1 1 9 2 4 7 | 0 1 6 70 2 4 7 2 28
  80     OPR       0       4      81      13      20  | 0 1 1 1 0 | 0 1 1 9 2 4 7 | 0 1 6 70 2 4 7 56
  81     STO       0       0      82      13      19  | 0 1 1 1 0 | 0 1 1 9 2 4 7 | 56 1 6 70 2 4 7
  82     OPR       0       0      70       6      12  | 0 1 1 1 0 | 0 1 1 9 2 4 7
  70     INC       0       1      71       6      13  | 0 1 1 1 0 | 0 1 1 9 2 4 7 56
  71     STO       0       0      72       6      12  | 0 1 1 1 0 | 56 1 1 9 2 4 7
  72     LOD       0       0      73       6      13  | 0 1 1 1 0 | 56 1 1 9 2 4 7 56
56
  73     SIO       0       1      74       6      12  | 0 1 1 1 0 | 56 1 1 9 2 4 7
  74     OPR       0       0       9       1       5  | 0 1 1 1 0
   9     INC       0       4      10       1       9  | 0 1 1 1 0 56 1 1 9
  10     LIT       0       7      11       1      10  | 0 1 1 1 0 56 1 1 9 7
  11     LIT       0      11      12       1      11  | 0 1 1 1 0 56 1 1 9 7 11
  12     LIT       0      13      13       1      12  | 0 1 1 1 0 56 1 1 9 7 11 13
  13     INC       0      -7      14       1       5  | 0 1 1 1 0
  14     CAL       1      75      75       6       5  | 0 1 1 1 0
  75     INC       0       7      76       6      12  | 0 1 1 1 0 | 0 1 1 15 7 11 13
  76     LOD       0       4      77       6      13  | 0 1 1 1 0 | 0 1 1 15 7 11 13 7
  77     LOD       0       5      78       6      14  | 0 1 1 1 0 | 0 1 1 15 7 11 13 7 11
  78     LOD       0       6      79       6      15  | 0 1 1 1 0 | 0 1 1 15 7 11 13 7 11 13
  79     OPR       0       4      80       6      14  | 0 1 1 1 0 | 0 1 1 15 7 11 13 7 143
  80     OPR       0       4      81       6      13  | 0 1 1 1 0 | 0 1 1 15 7 11 13 1001
  81     STO       0       0      82       6      12  | 0 1 1 1 0 | 1001 1 1 15 7 11 13
  82     OPR       0       0      15       1       5  | 0 1 1 1 0
  15     INC       0       1      16       1       6  | 0 1 1 1 0 1001
  16     STO       0       4      17       1       5  | 0 1 1 1 1001
  17     LOD       0       4      18       1       6  | 0 1 1 1 1001 1001
1001
  18     SIO       0       1      19       1       5  | 0 1 1 1 1001
  19     LIT       0       2      20       1       6  | 0 1 1 1 1001 2
  20     INC       0       4      21       1      10  | 0 1 1 1 1001 2 1 1 15 7
  21     LIT       0       7      22       1      11  | 0 1 1 1 1001 2 1 1 15 7 7
  22     LIT       0      11      23       1      12  | 0 1 1 1 1001 2 1 1 15 7 7 11
  23     LIT       0      13      24       1      13  | 0 1 1 1 1001 2 1 1 15 7 7 11 13
  24     INC       0      -7      25       1       6  | 0 1 1 1 1001 2
  25     CAL       1      75      75       7       6  | 0 1 1 1 1001 2
  75     INC       0       7      76       7      13  | 0 1 1 1 1001 2 | 0 1 1 26 7 11 13
  76     LOD       0       4      77       7      14  | 0 1 1 1 1001 2 | 0 1 1 26 7 11 13 7
  77     LOD       0       5      78       7      15  | 0 1 1 1 1001 2 | 0 1 1 26 7 11 13 7 11
  78     LOD       0       6      79       7      16  | 0 1 1 1 1001 2 | 0 1 1 26 7 11 13 7 11 13
  79     OPR       0       4      80       7      15  | 0 1 1 1 1001 2 | 0 1 1 26 7 11 13 7 143
  80     OPR       0       4      81       7      14  | 0 1 1 1 1001 2 | 0 1 1 26 7 11 13 1001
  81     STO       0       0      82       7      13  | 0 1 1 1 1001 2 | 1001 1 1 26 7 11 13
  82     OPR       0       0      26       1       6  | 0 1 1 1 1001 2
  26     INC       0       1      27       1       7  | 0 1 1 1 1001 2 1001
  27     OPR       0       4      28       1       6  | 0 1 1 1 1001 2002
  28     LIT       0    2000      29       1       7  | 0 1 1 1 1001 2002 2000
  29     OPR       0      12      30       1       6  | 0 1 1 1 1001 1
  30     JPC       0      40      31       1       5  | 0 1 1 1 1001
  31     INC       0       4      32       1       9  | 0 1 1 1 1001 1 2000 1 1
  32     LIT       0       2      33       1      10  | 0 1 1 1 1001 1 2000 1 1 2
  33     LIT       0       7      34       1      11  | 0 1 1 1 1001 1 2000 1 1 2 7
  34     OPR       0       4      35       1      10  | 0 1 1 1 1001 1 2000 1 1 14
  35     LIT       0      11      36       1      11  | 0 1 1 1 1001 1 2000 1 1 14 11
  36     LIT       0      13      37       1      12  | 0 1 1 1 1001 1 2000 1 1 14 11 13
  37     INC       0      -7      38       1       5  | 0 1 1 1 1001
  38     CAL       1      63      63       6       5  | 0 1 1 1 1001
  63     INC       0       7      64       6      12  | 0 1 1 1 1001 | 0 1 1 39 14 11 13
  64     INC       0       4      65       6      16  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 13 1001 143 13
  65     LOD       0       4      66       6      17  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 13 1001 143 13 14
  66     LOD       0       5      67       6      18  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 13 1001 143 13 14 11
  67     LOD       0       6      68       6      19  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 13 1001 143 13 14 11 13
  68     INC       0      -7      69       6      12  | 0 1 1 1 1001 | 0 1 1 39 14 11 13
  69     CAL       1      75      75      13      12  | 0 1 1 1 1001 | 0 1 1 39 14 11 13
  75     INC       0       7      76      13      19  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 | 0 1 6 70 14 11 13
  76     LOD       0       4      77      13      20  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 | 0 1 6 70 14 11 13 14
  77     LOD       0       5      78      13      21  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 | 0 1 6 70 14 11 13 14 11
  78     LOD       0       6      79      13      22  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 | 0 1 6 70 14 11 13 14 11 13
  79     OPR       0       4      80      13      21  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 | 0 1 6 70 14 11 13 14 143
  80     OPR       0       4      81      13      20  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 | 0 1 6 70 14 11 13 2002
  81     STO       0       0      82      13      19  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 | 2002 1 6 70 14 11 13
  82     OPR       0       0      70       6      12  | 0 1 1 1 1001 | 0 1 1 39 14 11 13
  70     INC       0       1      71       6      13  | 0 1 1 1 1001 | 0 1 1 39 14 11 13 2002
  71     STO       0       0      72       6      12  | 0 1 1 1 1001 | 2002 1 1 39 14 11 13
  72     LOD       0       0      73       6      13  | 0 1 1 1 1001 | 2002 1 1 39 14 11 13 2002
2002
  73     SIO       0       1      74       6      12  | 0 1 1 1 1001 | 2002 1 1 39 14 11 13
  74     OPR       0       0      39       1       5  | 0 1 1 1 1001
  39     JMP       0      46      46       1       5  | 0 1 1 1 1001
  46     INC       0       4      47       1       9  | 0 1 1 1 1001 2002 1 1 39
  47     LIT       0       2      48       1      10  | 0 1 1 1 1001 2002 1 1 39 2
  48     LIT       0       3      49       1      11  | 0 1 1 1 1001 2002 1 1 39 2 3
  49     LIT       0       3      50       1      12  | 0 1 1 1 1001 2002 1 1 39 2 3 3
  50     INC       0       4      51       1      16  | 0 1 1 1 1001 2002 1 1 39 2 3 3 2002 1 6 70
  51     LIT       0       3      52       1      17  | 0 1 1 1 1001 2002 1 1 39 2 3 3 2002 1 6 70 3
  52     LIT       0       5      53       1      18  | 0 1 1 1 1001 2002 1 1 39 2 3 3 2002 1 6 70 3 5
  53     LIT       0       4      54       1      19  | 0 1 1 1 1001 2002 1 1 39 2 3 3 2002 1 6 70 3 5 4
  54     INC       0      -7      55       1      12  | 0 1 1 1 1001 2002 1 1 39 2 3 3
  55     CAL       1      75      75      13      12  | 0 1 1 1 1001 2002 1 1 39 2 3 3
  75     INC       0       7      76      13      19  | 0 1 1 1 1001 2002 1 1 39 2 3 3 | 0 1 1 56 3 5 4
  76     LOD       0       4      77      13      20  | 0 1 1 1 1001 2002 1 1 39 2 3 3 | 0 1 1 56 3 5 4 3
  77     LOD       0       5      78      13      21  | 0 1 1 1 1001 2002 1 1 39 2 3 3 | 0 1 1 56 3 5 4 3 5
  78     LOD       0       6      79      13      22  | 0 1 1 1 1001 2002 1 1 39 2 3 3 | 0 1 1 56 3 5 4 3 5 4
  79     OPR       0       4      80      13      21  | 0 1 1 1 1001 2002 1 1 39 2 3 3 | 0 1 1 56 3 5 4 3 20
  80     OPR       0       4      81      13      20  | 0 1 1 1 1001 2002 1 1 39 2 3 3 | 0 1 1 56 3 5 4 60
  81     STO       0       0      82      13      19  | 0 1 1 1 1001 2002 1 1 39 2 3 3 | 60 1 1 56 3 5 4
  82     OPR       0       0      56       1      12  | 0 1 1 1 1001 2002 1 1 39 2 3 3
  56     INC       0       1      57       1      13  | 0 1 1 1 1001 2002 1 1 39 2 3 3 60
  57     OPR       0       4      58       1      12  | 0 1 1 1 1001 2002 1 1 39 2 3 180
  58     LIT       0     173      59       1      13  | 0 1 1 1 1001 2002 1 1 39 2 3 180 173
  59     OPR       0       3      60       1      12  | 0 1 1 1 1001 2002 1 1 39 2 3 7
  60     INC       0      -7      61       1       5  | 0 1 1 1 1001
  61     CAL       1      63      63       6       5  | 0 1 1 1 1001
  63     INC       0       7      64       6      12  | 0 1 1 1 1001 | 0 1 1 62 2 3 7
  64     INC       0       4      65       6      16  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 173 1 1 56
  65     LOD       0       4      66       6      17  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 173 1 1 56 2
  66     LOD       0       5      67       6      18  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 173 1 1 56 2 3
  67     LOD       0       6      68       6      19  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 173 1 1 56 2 3 7
  68     INC       0      -7      69       6      12  | 0 1 1 1 1001 | 0 1 1 62 2 3 7
  69     CAL       1      75      75      13      12  | 0 1 1 1 1001 | 0 1 1 62 2 3 7
  75     INC       0       7      76      13      19  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 | 0 1 6 70 2 3 7
  76     LOD       0       4      77      13      20  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 | 0 1 6 70 2 3 7 2
  77     LOD       0       5      78      13      21  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 | 0 1 6 70 2 3 7 2 3
  78     LOD       0       6      79      13      22  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 | 0 1 6 70 2 3 7 2 3 7
  79     OPR       0       4      80      13      21  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 | 0 1 6 70 2 3 7 2 21
  80     OPR       0       4      81      13      20  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 | 0 1 6 70 2 3 7 42
  81     STO       0       0      82      13      19  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 | 42 1 6 70 2 3 7
  82     OPR       0       0      70       6      12  | 0 1 1 1 1001 | 0 1 1 62 2 3 7
  70     INC       0       1      71       6      13  | 0 1 1 1 1001 | 0 1 1 62 2 3 7 42
  71     STO       0       0      72       6      12  | 0 1 1 1 1001 | 42 1 1 62 2 3 7
  72     LOD       0       0      73       6      13  | 0 1 1 1 1001 | 42 1 1 62 2 3 7 42
42
  73     SIO       0       1      74       6      12  | 0 1 1 1 1001 | 42 1 1 62 2 3 7
  74     OPR       0       0      62       1       5  | 0 1 1 1 1001
  62     OPR       0       0       1       1       0  
   1     SIO       0       3       0       0       0  
#kMac:~/Projects/Xcode/PL0/PL0 (master)$ echo $?
0